We started with a port scan :
```
nmap 10.10.99.64 -p-
```
![Image Alt](https://github.com/kcoainnapo/tryhackme/blob/main/Basic%20Pentesting/images/nmap.png?raw=true)

What is the name of the hidden directory on the web server ? We start by fuzzing the web server : 
```
ffuf -u http://10.10.99.64/FUZZ -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -c
```
![Image Alt](https://github.com/kcoainnapo/tryhackme/blob/main/Basic%20Pentesting/images/fuzz.png?raw=true)

By going to http://10.10.99.64/development/ we obtain a directory listing for the /development folder on the web server with 2 files : 
- dev.txt
- j.txt

It gives us information about 2 potential user of the system :
- J
- K

It also gives us a hint to go check the smb service : 
![Image Alt](https://github.com/kcoainnapo/tryhackme/blob/main/Basic%20Pentesting/images/smb.png?raw=true)

We also learnt that the password of user starting with letter j is crackable from /etc/shadow which means via the SSH service. 

After downloading the file staff.txt in the SMB server we learn more about the users of the system : 
- jan
- kay

So we can try brute-forcing the ssh service with hydra : 
```
hydra -l jan -P /usr/share/seclists/rockyou.txt 10.10.99.64 ssh
```
![Image Alt](https://github.com/kcoainnapo/tryhackme/blob/main/Basic%20Pentesting/images/hydra.png?raw=true)

We can now connect to SSH with the credentials of the user jan :
```
ssh jan@10.10.99.64
```
Once we are connected we can confirm the other user is kay : 
```
ls /home
```
![Image Alt](https://github.com/kcoainnapo/tryhackme/blob/main/Basic%20Pentesting/images/kay.png?raw=true)

By looking around in the system we found the ssh key of user kay :

![Image Alt](https://github.com/kcoainnapo/tryhackme/blob/main/Basic%20Pentesting/images/ls-ssh-kay.png?raw=true)

We can now cat the content of the key, copy paste the content in our local machine, give the appropriate rights to the key file and try to connect to user kay via SSH 

On the target system : 
```
cat id_rsa
```

On our local machine we do nano id_rsa, paste the content of the key : 
```
chmod 600 id_rsa
ssh -i kay@10.10.99.64
```
![Image Alt](https://github.com/kcoainnapo/tryhackme/blob/main/Basic%20Pentesting/images/ssh-key-pass.png?raw=true)

We need a password for the key, so we use ssh2john to obtain the hash of the ssh key, to then be able to crack the key : 
```
ssh2john id_rsa > id_rsa_hash
john id_rsa_hash --wordlist=/usr/share/seclists/rockyou.txt
```
![Image Alt](https://github.com/kcoainnapo/tryhackme/blob/main/Basic%20Pentesting/images/key-cracked.png?raw=true)

We can now connect to user kay by providing the password we just cracked and obtain the final password: 

![Image Alt](https://github.com/kcoainnapo/tryhackme/blob/main/Basic%20Pentesting/images/final-flag.png?raw=true)


 VOILA ! 
